{{#if d3el}}

  {{#with (ember-sparkles/d3-axis xScale position='bottom' tickFormat='%Y-%m-%d') as |xAxis|}}
    {{ember-d3-helpers/invoke (pipe
      (d3-append 'g')
      (d3-attr 'class' 'x axis')
      (d3-attr 'transform' (concat 'translate(0,' height ')'))
      (d3-call xAxis)
      ) d3el
    }}
  {{/with}}

  {{#with (ember-sparkles/d3-axis yScale position='left' ticks=10) as |yAxis|}}
    {{ember-d3-helpers/invoke (pipe
      (d3-append 'g')
      (d3-attr 'class' 'y axis')
      (d3-call yAxis)
      ) d3el
    }}
  {{/with}}

  {{#with (compute
    (pipe
      (d3-select-all 'rect')
      (d3-data data (d3-get '0'))
    ) d3el) as |bars|}}

    {{ember-d3-helpers/invoke (pipe
      (d3-enter (pipe
        (d3-append 'rect')
        (d3-attr 'class' 'bar')
        (d3-attr 'x' (pipe (d3-get '0') xScale))
        (d3-attr 'y' (pipe (d3-get '1') yScale))
        (d3-attr 'width' xScale.bandwidth)
        (d3-attr 'height' (pipe (d3-get '1') yScale (bar-height height)))
      ))) bars
    }}

    {{ember-d3-helpers/invoke (pipe
      (d3-exit (pipe (d3-remove)))
      ) bars
    }}
  {{/with}}

{{/if}}
